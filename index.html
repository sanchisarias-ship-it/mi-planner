<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi Planner Saludable</title>

<style>
body { font-family:-apple-system,BlinkMacSystemFont,Arial; background:#f2f2f7; margin:0; }
header { background:#000; color:#fff; padding:14px; text-align:center; }
section { padding:14px; }
.card { background:#fff; padding:14px; border-radius:14px; margin-bottom:12px; }
h3 { margin-top:16px; }
input { padding:8px; width:70%; }
button { padding:6px 10px; margin-left:6px; }
li { margin:6px 0; list-style:none; }

li.comprado {
  text-decoration: line-through;
  color: #777;
  background: #e6ffe6;
  border-radius: 8px;
  padding: 4px;
}
</style>
</head>
<body>

<header>
<h1>üõí Mi Planner Saludable</h1>
</header>

<section id="alimentos">
<div class="card" id="alimentosContenido"></div>
</section>

<script>
const BASE = {
  "Prote√≠nas": ["Pollo", "Huevos", "At√∫n", "Salm√≥n", "Ternera"],
  "Verduras": ["Tomate", "Lechuga", "Br√≥coli", "Calabac√≠n"],
  "Hidratos": ["Arroz", "Avena", "Pan integral", "Patata"],
  "Otros": ["Aceite de oliva", "Fruta", "Frutos secos"]
};

function getCats() {
  if (!localStorage.getItem("cats")) {
    localStorage.setItem("cats", JSON.stringify(BASE));
  }
  return JSON.parse(localStorage.getItem("cats"));
}

function saveCats(cats) {
  localStorage.setItem("cats", JSON.stringify(cats));
}

function renderAlimentos() {
  const cats = getCats();
  let html = "";
  for (let cat in cats) {
    html += "<h3>" + cat + "</h3><ul>";
    cats[cat].forEach((item, i) => {
      const key = "check_" + item;
      const checked = localStorage.getItem(key) ? "checked" : "";
      const comprado = localStorage.getItem(key) ? "comprado" : "";

      html += "<li class='" + comprado + "'>";
      html += "<input type='checkbox' onchange=\"toggleCheck('" + key + "', this)\" " + checked + "> ";
      html += item;
      html += " <button onclick=\"removeFood('" + cat + "'," + i + ")\">‚ùå</button>";
      html += "</li>";
    });
    html += "</ul>";
    html += "<input id='in_" + cat + "' placeholder='A√±adir alimento'>";
    html += "<button onclick=\"addFood('" + cat + "')\">A√±adir</button>";
  }
  document.getElementById("alimentosContenido").innerHTML = html;
}

function toggleCheck(key, checkbox) {
  if (checkbox.checked) {
    localStorage.setItem(key, "1");
    checkbox.parentElement.classList.add("comprado");
  } else {
    localStorage.removeItem(key);
    checkbox.parentElement.classList.remove("comprado");
  }
}

function addFood(cat) {
  const cats = getCats();
  const val = document.getElementById("in_" + cat).value.trim();
  if (!val) return;
  cats[cat].push(val);
  saveCats(cats);
  renderAlimentos();
}

function removeFood(cat, i) {
  const cats = getCats();
  cats[cat].splice(i, 1);
  saveCats(cats);
  renderAlimentos();
}

renderAlimentos();
</script>

</body>
</html>
